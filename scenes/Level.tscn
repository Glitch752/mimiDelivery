[gd_scene format=4 uid="uid://dkmdre5twhdu6"]

[ext_resource type="Texture2D" uid="uid://d1phcyais2y3x" path="res://art/map/template.png" id="2_6vs76"]
[ext_resource type="Script" uid="uid://42hcv00klol8" path="res://scenes/level/road_generation.gd" id="3_faw0r"]
[ext_resource type="PackedScene" uid="uid://bmjufwhraqdtj" path="res://scenes/level/buildings/IKEE.tscn" id="3_kl8ac"]
[ext_resource type="PackedScene" uid="uid://c6a2gml8bh40a" path="res://scenes/mainCharacter.tscn" id="4_kl8ac"]
[ext_resource type="PackedScene" uid="uid://e8vn41dpp5hh" path="res://scenes/level/buildings/MRT.tscn" id="4_qifjx"]
[ext_resource type="PackedScene" uid="uid://cj2icpvoplg7o" path="res://scenes/level/buildings/EmptyTree.tscn" id="5_dke22"]
[ext_resource type="PackedScene" uid="uid://dwk13wt5vdk6n" path="res://scenes/level/buildings/J8.tscn" id="6_4qegb"]
[ext_resource type="PackedScene" uid="uid://3jtirvh8swdx" path="res://scenes/level/buildings/CatHome.tscn" id="8_2eouu"]
[ext_resource type="PackedScene" uid="uid://cknkcdvxhiuvh" path="res://scenes/level/buildings/FruitStand.tscn" id="8_gips2"]
[ext_resource type="Script" uid="uid://b6bcl1slrhxf2" path="res://scenes/level/buildings/data/building_data.gd" id="10_ax7ne"]
[ext_resource type="Script" uid="uid://bsvwb03y27t7a" path="res://scripts/item.gd" id="11_m0xki"]
[ext_resource type="Resource" uid="uid://k6kjnly2mrp8" path="res://items/blahaj.tres" id="11_wsd7d"]
[ext_resource type="Script" uid="uid://dvsdgjr81g6k6" path="res://scenes/level/buildings/data/building_data_shop.gd" id="12_xe3hh"]
[ext_resource type="Texture2D" uid="uid://xllxi6q6nwos" path="res://art/minimap_frame_background.png" id="13_opqd1"]
[ext_resource type="Texture2D" uid="uid://ckd3mu10naw8y" path="res://art/mimiicon-1.png.png" id="13_p6oy6"]
[ext_resource type="Script" uid="uid://bjssiakt2chbg" path="res://scenes/level/buildings/data/building_data_destination.gd" id="13_xe3hh"]
[ext_resource type="Script" path="res://scripts/minimap.gd" id="15_p6oy6"]
[ext_resource type="Texture2D" uid="uid://3qybvbjv7k5n" path="res://art/minimap_frame.png" id="16_xyj84"]

[sub_resource type="GDScript" id="GDScript_m0xki"]
script/source = "@tool

extends Node2D

@export_tool_button(\"Generate map\")
var generate_map = _generate_map

@export var map_size: Vector2i = Vector2i.ONE * 20

func _generate_map():
    pass
"

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_kl8ac"]
texture = ExtResource("2_6vs76")
margins = Vector2i(2, 2)
separation = Vector2i(2, 2)
texture_region_size = Vector2i(32, 32)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
4:0/0 = 0
5:0/0 = 0

[sub_resource type="TileSet" id="TileSet_qifjx"]
tile_size = Vector2i(32, 32)
sources/0 = SubResource("TileSetAtlasSource_kl8ac")

[sub_resource type="TileSetScenesCollectionSource" id="TileSetScenesCollectionSource_kl8ac"]
scenes/1/scene = ExtResource("3_kl8ac")
scenes/2/scene = ExtResource("4_qifjx")
scenes/3/scene = ExtResource("5_dke22")
scenes/4/scene = ExtResource("6_4qegb")
scenes/5/scene = ExtResource("8_2eouu")
scenes/6/scene = ExtResource("8_gips2")

[sub_resource type="TileSet" id="TileSet_6vs76"]
tile_size = Vector2i(32, 32)
sources/1 = SubResource("TileSetScenesCollectionSource_kl8ac")

[sub_resource type="GDScript" id="GDScript_xe3hh"]
script/source = "@tool

extends TileMapLayer

@export_tool_button(\"Generate building data\")
var assign_addresses = _assign_addresses

@export_tool_button(\"Pregenerate building map\")
var pregenerate_building_map = _pregenerate_building_map

@export var building_data: Dictionary[Vector2i, BuildingData]
## Dictionary[MapData.BuildingPurpose, Array[Vector2i]]
@export var buildings: Dictionary[MapData.BuildingPurpose, Array]

func _ready():
    if not Engine.is_editor_hint():
        MapData.building_data = building_data
        MapData.buildings = buildings

func _assign_addresses():
    building_data = {}

    var used_ids = []
    for building in get_children():
        var id = randi() % 999999 + 1
        while id in used_ids:
            id = randi() % 999999 + 1
        used_ids.append(id)

        building_data[building.get_tile_position()] = building.get_building_data(id)


func _pregenerate_building_map():
    buildings = {}
    for purpose in MapData.BuildingPurpose.values():
        buildings[purpose] = []

    for building in get_children():
        if building is Node2D:
            var bldg: Node2D = building
            if bldg.has_method(\"get_tile_position\"):
                var pos: Vector2i = bldg.get_tile_position()
                var purpose: MapData.BuildingPurpose = bldg.building_data.purpose
                buildings[purpose].append(pos)
"

[sub_resource type="Resource" id="Resource_25g1l"]
script = ExtResource("12_xe3hh")
items = Array[ExtResource("11_m0xki")]([ExtResource("11_wsd7d")])
building_name = "IKEE"
metadata/_custom_type_script = "uid://dvsdgjr81g6k6"

[sub_resource type="Resource" id="Resource_cr4g7"]
script = ExtResource("10_ax7ne")
purpose = 3
building_name = "MRT"
metadata/_custom_type_script = "uid://b6bcl1slrhxf2"

[sub_resource type="Resource" id="Resource_iw3v5"]
script = ExtResource("13_xe3hh")
address = 298245
purpose = 1
building_name = "Cat Home #298245"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_40jy2"]
script = ExtResource("13_xe3hh")
address = 449747
purpose = 1
building_name = "Cat Home #449747"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_gmhdv"]
script = ExtResource("10_ax7ne")
purpose = 2
building_name = "Empty Tree"
metadata/_custom_type_script = "uid://b6bcl1slrhxf2"

[sub_resource type="Resource" id="Resource_0akr6"]
script = ExtResource("13_xe3hh")
address = 552366
purpose = 1
building_name = "Cat Home #552366"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_u2nc6"]
script = ExtResource("13_xe3hh")
address = 862895
purpose = 1
building_name = "Cat Home #862895"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_vs87s"]
script = ExtResource("13_xe3hh")
address = 246228
purpose = 1
building_name = "Cat Home #246228"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_sv6t6"]
script = ExtResource("13_xe3hh")
address = 311833
purpose = 1
building_name = "Cat Home #311833"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_witbp"]
script = ExtResource("13_xe3hh")
address = 499073
purpose = 1
building_name = "Cat Home #499073"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_kflc5"]
script = ExtResource("13_xe3hh")
address = 491039
purpose = 1
building_name = "Cat Home #491039"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_itu0t"]
script = ExtResource("13_xe3hh")
address = 134513
purpose = 1
building_name = "Cat Home #134513"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_4no8g"]
script = ExtResource("13_xe3hh")
address = 348396
purpose = 1
building_name = "Cat Home #348396"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_kja0s"]
script = ExtResource("13_xe3hh")
address = 948103
purpose = 1
building_name = "Cat Home #948103"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_48r4s"]
script = ExtResource("13_xe3hh")
address = 966698
purpose = 1
building_name = "Cat Home #966698"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_p3doa"]
script = ExtResource("13_xe3hh")
address = 459059
purpose = 1
building_name = "Cat Home #459059"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_2sboe"]
script = ExtResource("13_xe3hh")
address = 929509
purpose = 1
building_name = "Cat Home #929509"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_baq46"]
script = ExtResource("13_xe3hh")
address = 303740
purpose = 1
building_name = "Cat Home #303740"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_nbaxu"]
script = ExtResource("13_xe3hh")
address = 106818
purpose = 1
building_name = "Cat Home #106818"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_nu2gi"]
script = ExtResource("13_xe3hh")
address = 56636
purpose = 1
building_name = "Cat Home #56636"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_70b58"]
script = ExtResource("13_xe3hh")
address = 522772
purpose = 1
building_name = "Cat Home #522772"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_0dkw0"]
script = ExtResource("13_xe3hh")
address = 565500
purpose = 1
building_name = "Cat Home #565500"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_l8q54"]
script = ExtResource("10_ax7ne")
purpose = 1
building_name = "J67 Hotel"
metadata/_custom_type_script = "uid://b6bcl1slrhxf2"

[sub_resource type="Resource" id="Resource_ycrer"]
script = ExtResource("13_xe3hh")
address = 988179
purpose = 1
building_name = "Cat Home #988179"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_jua6w"]
script = ExtResource("13_xe3hh")
address = 920170
purpose = 1
building_name = "Cat Home #920170"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_gooay"]
script = ExtResource("13_xe3hh")
address = 253277
purpose = 1
building_name = "Cat Home #253277"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_ru7rm"]
script = ExtResource("13_xe3hh")
address = 615463
purpose = 1
building_name = "Cat Home #615463"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_gkvn1"]
script = ExtResource("13_xe3hh")
address = 447026
purpose = 1
building_name = "Cat Home #447026"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_pl6yh"]
script = ExtResource("13_xe3hh")
address = 160352
purpose = 1
building_name = "Cat Home #160352"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_k5548"]
script = ExtResource("13_xe3hh")
address = 242053
purpose = 1
building_name = "Cat Home #242053"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_ob73l"]
script = ExtResource("13_xe3hh")
address = 227656
purpose = 1
building_name = "Cat Home #227656"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_dcwjr"]
script = ExtResource("13_xe3hh")
address = 577798
purpose = 1
building_name = "Cat Home #577798"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_b38xg"]
script = ExtResource("13_xe3hh")
address = 111638
purpose = 1
building_name = "Cat Home #111638"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_83eg4"]
script = ExtResource("13_xe3hh")
address = 613379
purpose = 1
building_name = "Cat Home #613379"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_ayxsy"]
script = ExtResource("13_xe3hh")
address = 135983
purpose = 1
building_name = "Cat Home #135983"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_gi26r"]
script = ExtResource("13_xe3hh")
address = 552584
purpose = 1
building_name = "Cat Home #552584"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_vgtnl"]
script = ExtResource("13_xe3hh")
address = 591974
purpose = 1
building_name = "Cat Home #591974"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_mbj8a"]
script = ExtResource("13_xe3hh")
address = 644115
purpose = 1
building_name = "Cat Home #644115"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_rcwq3"]
script = ExtResource("13_xe3hh")
address = 676789
purpose = 1
building_name = "Cat Home #676789"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_unn01"]
script = ExtResource("13_xe3hh")
address = 882055
purpose = 1
building_name = "Cat Home #882055"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_3yv64"]
script = ExtResource("13_xe3hh")
address = 128152
purpose = 1
building_name = "Cat Home #128152"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_xoajd"]
script = ExtResource("13_xe3hh")
address = 767665
purpose = 1
building_name = "Cat Home #767665"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_rvbj1"]
script = ExtResource("13_xe3hh")
address = 442874
purpose = 1
building_name = "Cat Home #442874"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_il38x"]
script = ExtResource("13_xe3hh")
address = 34827
purpose = 1
building_name = "Cat Home #34827"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_2gdwi"]
script = ExtResource("13_xe3hh")
address = 300043
purpose = 1
building_name = "Cat Home #300043"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_jg4gp"]
script = ExtResource("13_xe3hh")
address = 255686
purpose = 1
building_name = "Cat Home #255686"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_uccw5"]
script = ExtResource("13_xe3hh")
address = 364410
purpose = 1
building_name = "Cat Home #364410"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_prkx5"]
script = ExtResource("13_xe3hh")
address = 166736
purpose = 1
building_name = "Cat Home #166736"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="Resource" id="Resource_yjjmw"]
script = ExtResource("13_xe3hh")
address = 550597
purpose = 1
building_name = "Cat Home #550597"
metadata/_custom_type_script = "uid://bjssiakt2chbg"

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_opqd1"]
texture = ExtResource("13_opqd1")

[node name="Level" type="Node2D" unique_id=875250379]
visibility_layer = 5
script = SubResource("GDScript_m0xki")
metadata/_edit_vertical_guides_ = [1903.0, 1639.0]
metadata/_edit_horizontal_guides_ = [282.0, 18.0]

[node name="RoadGrid" type="TileMapLayer" parent="." unique_id=1277065790 node_paths=PackedStringArray("building_grid")]
texture_filter = 1
scale = Vector2(2, 2)
tile_map_data = PackedByteArray("AAD8//v/AAAAAAAAAAD8//z/AAAAAAAAAAD8//3/AAAAAAAAAAD8//7/AAAAAAAAAAD8/wEAAAAAAAAAAAD8/wIAAAAAAAAAAAD8/wMAAAAAAAAAAAD9//v/AAADAAAAABD9//z/AAAAAAAAAAD9//3/AAAAAAAAAAD9////AAAAAAAAAAD9/wIAAAADAAAAABD9/wMAAAAAAAAAAAD+//3/AAAAAAAAAAD+/wAAAAABAAAAAAD+/wMAAAABAAAAAAD///3/AAAAAAAAAAD//wAAAAAAAAAAAAD//wIAAAADAAAAAAD//wMAAAAAAAAAAAAAAPv/AAAAAAAAAAAAAP3/AAAAAAAAAAAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAABAP3/AAABAAAAAAABAAIAAAAAAAAAAAABAAMAAAAAAAAAAAACAPv/AAAAAAAAAAACAPz/AAADAAAAAAACAP3/AAAAAAAAAAACAAEAAAAAAAAAAAACAAMAAAABAAAAAAADAPv/AAAAAAAAAAADAPz/AAAAAAAAAAADAP3/AAAAAAAAAAADAP7/AAAAAAAAAAADAP//AAAAAAAAAAADAAAAAAAAAAAAAAADAAEAAAAAAAAAAAADAAIAAAAAAAAAAAADAAMAAAAAAAAAAAD8////AAAAAAAAAAD8/wAAAAAAAAAAAAD9//7/AAAAAAAAAAD9/wAAAAAAAAAAAAD9/wEAAAAAAAAAAAD+//7/AAAAAAAAAAD+/wEAAAACAAAAAAD///7/AAAAAAAAAAD//wEAAAAAAAAAAAAAAAEAAAABAAAAAAABAP7/AAAAAAAAAAABAP//AAADAAAAAAABAAAAAAAAAAAAAAABAAEAAAAAAAAAAAACAP7/AAAAAAAAAAACAP//AAAAAAAAAAACAAAAAAAAAAAAAAD8/wQAAAAAAAAAAAD9/wQAAAAAAAAAAAD+//z/AAABAAAAAAD+////AAACAAAAAAD+/wQAAAAAAAAAAAD///v/AAADAAAAAAD/////AAADAAAAABD//wQAAAAAAAAAAAAAAPz/AAADAAAAABAAAP7/AAACAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAABAPv/AAACAAAAAAABAAQAAAAAAAAAAAACAAIAAAACAAAAAAACAAQAAAAAAAAAAAADAAQAAAAAAAAAAAAEAPv/AAAAAAAAAAAEAPz/AAAAAAAAAAAEAP3/AAAAAAAAAAAEAP7/AAAAAAAAAAAEAP//AAAAAAAAAAAEAAAAAAAAAAAAAAAEAAEAAAAAAAAAAAAEAAIAAAAAAAAAAAAEAAMAAAAAAAAAAAAEAAQAAAAAAAAAAAD6//n/AAAAAAAAAAD6//r/AAAAAAAAAAD6//v/AAAAAAAAAAD6//z/AAAAAAAAAAD6//3/AAAAAAAAAAD6//7/AAAAAAAAAAD6////AAAAAAAAAAD6/wAAAAAAAAAAAAD6/wEAAAAAAAAAAAD6/wIAAAAAAAAAAAD6/wMAAAAAAAAAAAD6/wQAAAAAAAAAAAD6/wUAAAAAAAAAAAD6/wYAAAAAAAAAAAD7//n/AAAAAAAAAAD7//r/AAAAAAAAAAD7//v/AAAAAAAAAAD7//z/AAAAAAAAAAD7//3/AAAAAAAAAAD7//7/AAAAAAAAAAD7////AAAAAAAAAAD7/wAAAAAAAAAAAAD7/wEAAAAAAAAAAAD7/wIAAAAAAAAAAAD7/wMAAAAAAAAAAAD7/wQAAAAAAAAAAAD7/wUAAAAAAAAAAAD7/wYAAAAAAAAAAAD8//n/AAAAAAAAAAD8//r/AAAAAAAAAAD8/wUAAAAAAAAAAAD8/wYAAAAAAAAAAAD9//n/AAAAAAAAAAD9//r/AAAAAAAAAAD9/wUAAAAAAAAAAAD9/wYAAAAAAAAAAAD+//n/AAAAAAAAAAD+//r/AAACAAAAAAD+/wUAAAAAAAAAAAD+/wYAAAAAAAAAAAD///n/AAAAAAAAAAD///r/AAAAAAAAAAD//wUAAAAAAAAAAAD//wYAAAAAAAAAAAAAAPn/AAAAAAAAAAAAAPr/AAAAAAAAAAAAAAUAAAAAAAAAAAAAAAYAAAAAAAAAAAABAPn/AAAAAAAAAAABAPr/AAAAAAAAAAABAAUAAAAAAAAAAAABAAYAAAAAAAAAAAACAPn/AAAAAAAAAAACAPr/AAAAAAAAAAACAAUAAAAAAAAAAAACAAYAAAAAAAAAAAADAPn/AAAAAAAAAAADAPr/AAAAAAAAAAADAAUAAAAAAAAAAAADAAYAAAAAAAAAAAAEAPn/AAAAAAAAAAAEAPr/AAAAAAAAAAAEAAUAAAAAAAAAAAAEAAYAAAAAAAAAAAAFAPn/AAAAAAAAAAAFAPr/AAAAAAAAAAAFAPv/AAAAAAAAAAAFAPz/AAAAAAAAAAAFAP3/AAAAAAAAAAAFAP7/AAAAAAAAAAAFAP//AAAAAAAAAAAFAAAAAAAAAAAAAAAFAAEAAAAAAAAAAAAFAAIAAAAAAAAAAAAFAAMAAAAAAAAAAAAFAAQAAAAAAAAAAAAFAAUAAAAAAAAAAAAFAAYAAAAAAAAAAAAGAPn/AAAAAAAAAAAGAPr/AAAAAAAAAAAGAPv/AAAAAAAAAAAGAPz/AAAAAAAAAAAGAP3/AAAAAAAAAAAGAP7/AAAAAAAAAAAGAP//AAAAAAAAAAAGAAAAAAAAAAAAAAAGAAEAAAAAAAAAAAAGAAIAAAAAAAAAAAAGAAMAAAAAAAAAAAAGAAQAAAAAAAAAAAAGAAUAAAAAAAAAAAAGAAYAAAAAAAAAAAD///z/AAAAAAAAAAA=")
tile_set = SubResource("TileSet_qifjx")
script = ExtResource("3_faw0r")
building_grid = NodePath("../BuildingGrid")

[node name="BuildingGrid" type="TileMapLayer" parent="." unique_id=791929155]
texture_filter = 1
position = Vector2(32, 32)
scale = Vector2(2, 2)
tile_map_data = PackedByteArray("AAD///7/AQAAAAAAAQD+/wAAAQAAAAAAAgABAAAAAQAAAAAAAgACAPz/AQAAAAAABQD8//v/AQAAAAAABQACAAMAAQAAAAAAAwAAAAEAAQAAAAAAAwADAAMAAQAAAAAAAwADAAIAAQAAAAAAAwADAAEAAQAAAAAABQADAAAAAQAAAAAABQADAP//AQAAAAAABQADAP7/AQAAAAAABQADAP3/AQAAAAAABQADAPz/AQAAAAAABQADAPv/AQAAAAAABQACAPv/AQAAAAAABQD9//z/AQAAAAAAAwD9//3/AQAAAAAAAwD9//7/AQAAAAAAAwD9/wAAAQAAAAAAAwD9/wEAAQAAAAAAAQD8/wEAAQAAAAAAAwD//wEAAQAAAAAAAwD//wIAAQAAAAAAAwAAAAIAAQAAAAAAAwABAAEAAQAAAAAAAwACAAEAAQAAAAAAAwACAAAAAQAAAAAABQACAP//AQAAAAAABQACAP7/AQAAAAAABQACAP3/AQAAAAAABQABAP3/AQAAAAAABQAAAP3/AQAAAAAABQD///3/AQAAAAAABQD+//3/AQAAAAAAAwABAP7/AQAAAAAABQABAP//AQAAAAAABQD//wAAAQAAAAAABAD+//7/AQAAAAAAAwD8//z/AQAAAAAABQD8//3/AQAAAAAAAgD8//7/AQAAAAAAAwD8////AQAAAAAAAwD8/wAAAQAAAAAAAwD8/wIAAQAAAAAABQD8/wMAAQAAAAAABQD9/wMAAQAAAAAAAwD+/wMAAQAAAAAAAwD//wMAAQAAAAAAAwAAAAMAAQAAAAAAAwABAAMAAQAAAAAAAwAAAPv/AQAAAAAAAQD9////AQAAAAAABAABAAIAAQAAAAAABAD8/wQAAQAAAAAABQD9/wQAAQAAAAAABQD+/wQAAQAAAAAAAgD+/wUAAQAAAAAABQD9/wUAAQAAAAAABQD8/wUAAQAAAAAABQD7/wUAAQAAAAAABQD7/wQAAQAAAAAABQD6/wQAAQAAAAAABQD6/wMAAQAAAAAABQD6/wIAAQAAAAAABQD6/wEAAQAAAAAABQD7/wEAAQAAAAAABQD7/wIAAQAAAAAABQD7/wMAAQAAAAAAAgD7//7/AQAAAAAABQD7//3/AQAAAAAABQD7//z/AQAAAAAABQD8//r/AQAAAAAABQD7//r/AQAAAAAABQD7//v/AQAAAAAABQD6//v/AQAAAAAABQD6//z/AQAAAAAABQD6//3/AQAAAAAABQD6//7/AQAAAAAABQD6////AQAAAAAAAwD6/wUAAQAAAAAAAwD6/wAAAQAAAAAAAwD7////AQAAAAAAAwD7/wAAAQAAAAAAAwD6//r/AQAAAAAAAwD///r/AQAAAAAAAwAAAPr/AQAAAAAAAwABAPr/AQAAAAAAAwACAPr/AQAAAAAAAwADAPr/AQAAAAAAAwAEAPr/AQAAAAAAAwAEAPv/AQAAAAAAAgAEAPz/AQAAAAAAAwAEAP3/AQAAAAAAAwAEAP7/AQAAAAAAAwAEAP//AQAAAAAAAwAEAAAAAQAAAAAAAwAEAAEAAQAAAAAAAwAEAAIAAQAAAAAAAwAEAAMAAQAAAAAAAgAEAAQAAQAAAAAABgADAAQAAQAAAAAAAwACAAQAAQAAAAAAAwABAAQAAQAAAAAAAwAAAAQAAQAAAAAAAwD//wQAAQAAAAAAAwD//wUAAQAAAAAAAwAAAAUAAQAAAAAAAwABAAUAAQAAAAAAAgACAAUAAQAAAAAAAwADAAUAAQAAAAAAAwAEAAUAAQAAAAAAAwAFAAUAAQAAAAAAAwAFAAQAAQAAAAAAAwAFAAMAAQAAAAAAAwAFAAIAAQAAAAAAAwAFAAEAAQAAAAAAAwAFAAAAAQAAAAAAAwAFAP//AQAAAAAAAwAFAP7/AQAAAAAAAwAFAP3/AQAAAAAAAwAFAPz/AQAAAAAAAwAFAPv/AQAAAAAAAwAFAPr/AQAAAAAAAwAFAPn/AQAAAAAABgAEAPn/AQAAAAAAAwADAPn/AQAAAAAAAwACAPn/AQAAAAAAAgABAPn/AQAAAAAAAwAAAPn/AQAAAAAAAwD///n/AQAAAAAAAwD+//n/AQAAAAAAAgD9//n/AQAAAAAAAwD8//n/AQAAAAAAAwD7//n/AQAAAAAAAwD6//n/AQAAAAAAAwD9//r/AQAAAAAAAQD///v/AQAAAAAAAgD+//z/AQAAAAAAAwD///z/AQAAAAAAAwA=")
tile_set = SubResource("TileSet_6vs76")
script = SubResource("GDScript_xe3hh")
building_data = Dictionary[Vector2i, ExtResource("10_ax7ne")]({
Vector2i(-6, -7): SubResource("Resource_gmhdv"),
Vector2i(-6, -6): SubResource("Resource_gmhdv"),
Vector2i(-6, -5): SubResource("Resource_jg4gp"),
Vector2i(-6, -4): SubResource("Resource_uccw5"),
Vector2i(-6, -3): SubResource("Resource_prkx5"),
Vector2i(-6, -2): SubResource("Resource_yjjmw"),
Vector2i(-6, -1): SubResource("Resource_gmhdv"),
Vector2i(-6, 0): SubResource("Resource_gmhdv"),
Vector2i(-6, 1): SubResource("Resource_vgtnl"),
Vector2i(-6, 2): SubResource("Resource_gi26r"),
Vector2i(-6, 3): SubResource("Resource_ayxsy"),
Vector2i(-6, 4): SubResource("Resource_83eg4"),
Vector2i(-6, 5): SubResource("Resource_gmhdv"),
Vector2i(-5, -7): SubResource("Resource_gmhdv"),
Vector2i(-5, -6): SubResource("Resource_il38x"),
Vector2i(-5, -5): SubResource("Resource_2gdwi"),
Vector2i(-5, -4): SubResource("Resource_xoajd"),
Vector2i(-5, -3): SubResource("Resource_3yv64"),
Vector2i(-5, -2): SubResource("Resource_unn01"),
Vector2i(-5, -1): SubResource("Resource_gmhdv"),
Vector2i(-5, 0): SubResource("Resource_gmhdv"),
Vector2i(-5, 1): SubResource("Resource_mbj8a"),
Vector2i(-5, 2): SubResource("Resource_rcwq3"),
Vector2i(-5, 3): SubResource("Resource_cr4g7"),
Vector2i(-5, 4): SubResource("Resource_b38xg"),
Vector2i(-5, 5): SubResource("Resource_dcwjr"),
Vector2i(-4, -7): SubResource("Resource_gmhdv"),
Vector2i(-4, -6): SubResource("Resource_rvbj1"),
Vector2i(-4, -5): SubResource("Resource_40jy2"),
Vector2i(-4, -4): SubResource("Resource_ycrer"),
Vector2i(-4, -3): SubResource("Resource_cr4g7"),
Vector2i(-4, -2): SubResource("Resource_gmhdv"),
Vector2i(-4, -1): SubResource("Resource_gmhdv"),
Vector2i(-4, 0): SubResource("Resource_gmhdv"),
Vector2i(-4, 1): SubResource("Resource_gmhdv"),
Vector2i(-4, 2): SubResource("Resource_jua6w"),
Vector2i(-4, 3): SubResource("Resource_gooay"),
Vector2i(-4, 4): SubResource("Resource_ru7rm"),
Vector2i(-4, 5): SubResource("Resource_ob73l"),
Vector2i(-3, -7): SubResource("Resource_gmhdv"),
Vector2i(-3, -6): SubResource("Resource_25g1l"),
Vector2i(-3, -4): SubResource("Resource_gmhdv"),
Vector2i(-3, -3): SubResource("Resource_gmhdv"),
Vector2i(-3, -2): SubResource("Resource_gmhdv"),
Vector2i(-3, -1): SubResource("Resource_l8q54"),
Vector2i(-3, 0): SubResource("Resource_gmhdv"),
Vector2i(-3, 1): SubResource("Resource_25g1l"),
Vector2i(-3, 3): SubResource("Resource_gmhdv"),
Vector2i(-3, 4): SubResource("Resource_gkvn1"),
Vector2i(-3, 5): SubResource("Resource_k5548"),
Vector2i(-2, -7): SubResource("Resource_cr4g7"),
Vector2i(-2, -4): SubResource("Resource_gmhdv"),
Vector2i(-2, -3): SubResource("Resource_gmhdv"),
Vector2i(-2, -2): SubResource("Resource_gmhdv"),
Vector2i(-2, 0): SubResource("Resource_cr4g7"),
Vector2i(-2, 3): SubResource("Resource_gmhdv"),
Vector2i(-2, 4): SubResource("Resource_cr4g7"),
Vector2i(-2, 5): SubResource("Resource_pl6yh"),
Vector2i(-1, -7): SubResource("Resource_gmhdv"),
Vector2i(-1, -6): SubResource("Resource_gmhdv"),
Vector2i(-1, -5): SubResource("Resource_cr4g7"),
Vector2i(-1, -4): SubResource("Resource_gmhdv"),
Vector2i(-1, -3): SubResource("Resource_nu2gi"),
Vector2i(-1, -2): SubResource("Resource_25g1l"),
Vector2i(-1, 0): SubResource("Resource_l8q54"),
Vector2i(-1, 1): SubResource("Resource_gmhdv"),
Vector2i(-1, 2): SubResource("Resource_gmhdv"),
Vector2i(-1, 3): SubResource("Resource_gmhdv"),
Vector2i(-1, 4): SubResource("Resource_gmhdv"),
Vector2i(-1, 5): SubResource("Resource_gmhdv"),
Vector2i(0, -7): SubResource("Resource_gmhdv"),
Vector2i(0, -6): SubResource("Resource_gmhdv"),
Vector2i(0, -5): SubResource("Resource_25g1l"),
Vector2i(0, -3): SubResource("Resource_nbaxu"),
Vector2i(0, 1): SubResource("Resource_gmhdv"),
Vector2i(0, 2): SubResource("Resource_gmhdv"),
Vector2i(0, 3): SubResource("Resource_gmhdv"),
Vector2i(0, 4): SubResource("Resource_gmhdv"),
Vector2i(0, 5): SubResource("Resource_gmhdv"),
Vector2i(1, -7): SubResource("Resource_gmhdv"),
Vector2i(1, -6): SubResource("Resource_gmhdv"),
Vector2i(1, -3): SubResource("Resource_baq46"),
Vector2i(1, -2): SubResource("Resource_70b58"),
Vector2i(1, -1): SubResource("Resource_0dkw0"),
Vector2i(1, 0): SubResource("Resource_cr4g7"),
Vector2i(1, 1): SubResource("Resource_gmhdv"),
Vector2i(1, 2): SubResource("Resource_l8q54"),
Vector2i(1, 3): SubResource("Resource_gmhdv"),
Vector2i(1, 4): SubResource("Resource_gmhdv"),
Vector2i(1, 5): SubResource("Resource_cr4g7"),
Vector2i(2, -7): SubResource("Resource_cr4g7"),
Vector2i(2, -6): SubResource("Resource_gmhdv"),
Vector2i(2, -5): SubResource("Resource_4no8g"),
Vector2i(2, -4): SubResource("Resource_iw3v5"),
Vector2i(2, -3): SubResource("Resource_2sboe"),
Vector2i(2, -2): SubResource("Resource_p3doa"),
Vector2i(2, -1): SubResource("Resource_48r4s"),
Vector2i(2, 0): SubResource("Resource_kja0s"),
Vector2i(2, 1): SubResource("Resource_gmhdv"),
Vector2i(2, 3): SubResource("Resource_gmhdv"),
Vector2i(2, 4): SubResource("Resource_gmhdv"),
Vector2i(2, 5): SubResource("Resource_gmhdv"),
Vector2i(3, -7): SubResource("Resource_gmhdv"),
Vector2i(3, -6): SubResource("Resource_gmhdv"),
Vector2i(3, -5): SubResource("Resource_itu0t"),
Vector2i(3, -4): SubResource("Resource_kflc5"),
Vector2i(3, -3): SubResource("Resource_witbp"),
Vector2i(3, -2): SubResource("Resource_sv6t6"),
Vector2i(3, -1): SubResource("Resource_vs87s"),
Vector2i(3, 0): SubResource("Resource_u2nc6"),
Vector2i(3, 1): SubResource("Resource_0akr6"),
Vector2i(3, 2): SubResource("Resource_gmhdv"),
Vector2i(3, 3): SubResource("Resource_gmhdv"),
Vector2i(3, 4): SubResource("Resource_gmhdv"),
Vector2i(3, 5): SubResource("Resource_gmhdv"),
Vector2i(4, -7): SubResource("Resource_gmhdv"),
Vector2i(4, -6): SubResource("Resource_gmhdv"),
Vector2i(4, -5): SubResource("Resource_cr4g7"),
Vector2i(4, -4): SubResource("Resource_gmhdv"),
Vector2i(4, -3): SubResource("Resource_gmhdv"),
Vector2i(4, -2): SubResource("Resource_gmhdv"),
Vector2i(4, -1): SubResource("Resource_gmhdv"),
Vector2i(4, 0): SubResource("Resource_gmhdv"),
Vector2i(4, 1): SubResource("Resource_gmhdv"),
Vector2i(4, 2): SubResource("Resource_gmhdv"),
Vector2i(4, 3): SubResource("Resource_cr4g7"),
Vector2i(4, 4): SubResource("Resource_gmhdv"),
Vector2i(4, 5): SubResource("Resource_gmhdv"),
Vector2i(5, -7): SubResource("Resource_gmhdv"),
Vector2i(5, -6): SubResource("Resource_gmhdv"),
Vector2i(5, -5): SubResource("Resource_gmhdv"),
Vector2i(5, -4): SubResource("Resource_gmhdv"),
Vector2i(5, -3): SubResource("Resource_gmhdv"),
Vector2i(5, -2): SubResource("Resource_gmhdv"),
Vector2i(5, -1): SubResource("Resource_gmhdv"),
Vector2i(5, 0): SubResource("Resource_gmhdv"),
Vector2i(5, 1): SubResource("Resource_gmhdv"),
Vector2i(5, 2): SubResource("Resource_gmhdv"),
Vector2i(5, 3): SubResource("Resource_gmhdv"),
Vector2i(5, 4): SubResource("Resource_gmhdv"),
Vector2i(5, 5): SubResource("Resource_gmhdv")
})
buildings = Dictionary[int, Array]({
0: [Vector2i(-1, -2), Vector2i(-3, 1), Vector2i(0, -5), Vector2i(-3, -6)],
1: [Vector2i(2, -4), Vector2i(-4, -5), Vector2i(3, 1), Vector2i(3, 0), Vector2i(3, -1), Vector2i(3, -2), Vector2i(3, -3), Vector2i(3, -4), Vector2i(3, -5), Vector2i(2, -5), Vector2i(2, 0), Vector2i(2, -1), Vector2i(2, -2), Vector2i(2, -3), Vector2i(1, -3), Vector2i(0, -3), Vector2i(-1, -3), Vector2i(1, -2), Vector2i(1, -1), Vector2i(-1, 0), Vector2i(-4, -4), Vector2i(-4, 2), Vector2i(-4, 3), Vector2i(-3, -1), Vector2i(1, 2), Vector2i(-4, 4), Vector2i(-3, 4), Vector2i(-2, 5), Vector2i(-3, 5), Vector2i(-4, 5), Vector2i(-5, 5), Vector2i(-5, 4), Vector2i(-6, 4), Vector2i(-6, 3), Vector2i(-6, 2), Vector2i(-6, 1), Vector2i(-5, 1), Vector2i(-5, 2), Vector2i(-5, -2), Vector2i(-5, -3), Vector2i(-5, -4), Vector2i(-4, -6), Vector2i(-5, -6), Vector2i(-5, -5), Vector2i(-6, -5), Vector2i(-6, -4), Vector2i(-6, -3), Vector2i(-6, -2)],
2: [Vector2i(2, 3), Vector2i(0, 1), Vector2i(3, 3), Vector2i(3, 2), Vector2i(-3, -4), Vector2i(-3, -3), Vector2i(-3, -2), Vector2i(-3, 0), Vector2i(-4, 1), Vector2i(-1, 1), Vector2i(-1, 2), Vector2i(0, 2), Vector2i(1, 1), Vector2i(2, 1), Vector2i(-2, -3), Vector2i(-2, -2), Vector2i(-4, -2), Vector2i(-4, -1), Vector2i(-4, 0), Vector2i(-3, 3), Vector2i(-2, 3), Vector2i(-1, 3), Vector2i(0, 3), Vector2i(1, 3), Vector2i(-6, -1), Vector2i(-6, 5), Vector2i(-6, 0), Vector2i(-5, -1), Vector2i(-5, 0), Vector2i(-6, -6), Vector2i(-1, -6), Vector2i(0, -6), Vector2i(1, -6), Vector2i(2, -6), Vector2i(3, -6), Vector2i(4, -6), Vector2i(4, -4), Vector2i(4, -3), Vector2i(4, -2), Vector2i(4, -1), Vector2i(4, 0), Vector2i(4, 1), Vector2i(4, 2), Vector2i(4, 4), Vector2i(3, 4), Vector2i(2, 4), Vector2i(1, 4), Vector2i(0, 4), Vector2i(-1, 4), Vector2i(-1, 5), Vector2i(0, 5), Vector2i(2, 5), Vector2i(3, 5), Vector2i(4, 5), Vector2i(5, 5), Vector2i(5, 4), Vector2i(5, 3), Vector2i(5, 2), Vector2i(5, 1), Vector2i(5, 0), Vector2i(5, -1), Vector2i(5, -2), Vector2i(5, -3), Vector2i(5, -4), Vector2i(5, -5), Vector2i(5, -6), Vector2i(5, -7), Vector2i(4, -7), Vector2i(3, -7), Vector2i(1, -7), Vector2i(0, -7), Vector2i(-1, -7), Vector2i(-3, -7), Vector2i(-4, -7), Vector2i(-5, -7), Vector2i(-6, -7), Vector2i(-2, -4), Vector2i(-1, -4)],
3: [Vector2i(-2, 0), Vector2i(1, 0), Vector2i(-4, -3), Vector2i(-2, 4), Vector2i(-5, 3), Vector2i(4, -5), Vector2i(4, 3), Vector2i(1, 5), Vector2i(2, -7), Vector2i(-2, -7), Vector2i(-1, -5)]
})

[node name="Mimi" parent="." unique_id=831696364 instance=ExtResource("4_kl8ac")]
z_as_relative = false
position = Vector2(-5, 34)

[node name="TasksPanel" parent="Mimi/Player/Camera2D/CanvasLayer/UIOverlay" parent_id_path=PackedInt32Array(831696364, 1291501507) index="1" unique_id=463488195 node_paths=PackedStringArray("building_grid", "player")]
building_grid = NodePath("../../../../../../BuildingGrid")
player = NodePath("../../../..")

[node name="MinigameContainer" parent="Mimi/Player/Camera2D/CanvasLayer/UIOverlay" parent_id_path=PackedInt32Array(831696364, 1291501507) index="4" unique_id=1729124971]
mouse_filter = 2

[node name="MetroMap" parent="Mimi/Player/Camera2D/CanvasLayer/UIOverlay" parent_id_path=PackedInt32Array(831696364, 1291501507) index="5" unique_id=94377571 node_paths=PackedStringArray("building_grid")]
building_grid = NodePath("../../../../../../BuildingGrid")

[node name="CanvasLayer" type="CanvasLayer" parent="." unique_id=1816034904]

[node name="PanelContainer" type="PanelContainer" parent="CanvasLayer" unique_id=1189794036]
clip_children = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -276.0
offset_top = 21.0
offset_right = -20.0
offset_bottom = 277.0
grow_horizontal = 0
theme_override_styles/panel = SubResource("StyleBoxTexture_opqd1")

[node name="SubViewportContainer" type="SubViewportContainer" parent="CanvasLayer/PanelContainer" unique_id=1132971130]
layout_mode = 2
stretch = true

[node name="SubViewport" type="SubViewport" parent="CanvasLayer/PanelContainer/SubViewportContainer" unique_id=957361270 node_paths=PackedStringArray("cameraNode", "playerNode")]
handle_input_locally = false
size = Vector2i(256, 256)
render_target_update_mode = 4
script = ExtResource("15_p6oy6")
cameraNode = NodePath("Camera2D")
playerNode = NodePath("../../../../Mimi/Player")

[node name="Camera2D" type="Camera2D" parent="CanvasLayer/PanelContainer/SubViewportContainer/SubViewport" unique_id=1917147209]
visibility_layer = 2

[node name="TextureRect2" type="TextureRect" parent="CanvasLayer/PanelContainer" unique_id=1577021811]
layout_mode = 2
texture = ExtResource("16_xyj84")

[node name="TextureRect" type="TextureRect" parent="CanvasLayer" unique_id=2015587974]
offset_left = 1642.0
offset_top = 168.0
offset_right = 1898.0
offset_bottom = 200.0
size_flags_vertical = 4
texture = ExtResource("13_p6oy6")
stretch_mode = 3

[editable path="Mimi"]
